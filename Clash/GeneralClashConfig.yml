# å˜æ›´ï¼šå¢åŠ  tproxy ç«¯å£ï¼Œå¼€å¯ DNS ï¼Œä¿®æ”¹ fake ip-filter(å¤§éƒ¨åˆ†èŠ±äº‘ï¼Œæœ«å°¾è¡¥å……äº† shellcrash ç‰ˆ)ï¼Œåˆ é™¤ cfw-bypass
# é…ç½®æ–‡ä»¶éœ€è¦æ”¾ç½®åœ¨ $HOME/.config/clash/config.yml
# æˆ–è€…è¿è¡Œç›®å½•ä¸‹çš„config.yml
#---------------------------------------------------#
# æ··åˆç«¯å£ HTTPå’ŒSOCKS5ç”¨ä¸€ä¸ªç«¯å£
mixed-port: 7890

# HTTP ä»£ç†ç«¯å£
# port: 7890

# SOCKS5 ä»£ç†ç«¯å£
# socks-port: 7891

# Linux å’Œ macOS çš„ redir ä»£ç†ç«¯å£ï¼Œä»…èƒ½ä»£ç† TCP æµé‡ (å¦‚éœ€ä½¿ç”¨æ­¤åŠŸèƒ½ï¼Œè¯·å–æ¶ˆæ³¨é‡Š)
# redir-port: 7892

# tproxy é€æ˜ä»£ç†ç«¯å£ï¼Œå¯ä»£ç† TCP ä¸ UDP æµé‡ï¼Œtproxy ç«¯å£ä»…é™ linux(Android) é€‚ç”¨
tproxy-port: 7894

# å…è®¸å±€åŸŸç½‘çš„è¿æ¥ï¼ˆå¯ç”¨æ¥å…±äº«ä»£ç†ï¼‰
allow-lan: true

# ä»…åœ¨å°†allow-lanè®¾ç½®ä¸ºtrueæ—¶é€‚ç”¨
# #"*": ç»‘å®šæ‰€æœ‰IPåœ°å€
# #192.168.122.11: ç»‘å®šå•ä¸ªIPv4åœ°å€
# #"[aaaa::a8aa:ff:fe09:57d8]": ç»‘å®šå•ä¸ªIPv6åœ°å€
bind-address: "*"
ipv6: true

# è§„åˆ™æ¨¡å¼ï¼šruleï¼ˆè§„åˆ™ï¼‰ / globalï¼ˆå…¨å±€ä»£ç†ï¼‰/ directï¼ˆå…¨å±€ç›´è¿ï¼‰/ script (è„šæœ¬)
mode: rule

# è®¾ç½®æ—¥å¿—è¾“å‡ºçº§åˆ« (é»˜è®¤çº§åˆ«ï¼šsilentï¼Œå³ä¸è¾“å‡ºä»»ä½•å†…å®¹ï¼Œä»¥é¿å…å› æ—¥å¿—å†…å®¹è¿‡å¤§è€Œå¯¼è‡´ç¨‹åºå†…å­˜æº¢å‡ºï¼‰ã€‚
# 5 ä¸ªçº§åˆ«ï¼šsilent / error / warning / info / debugã€‚çº§åˆ«è¶Šé«˜æ—¥å¿—è¾“å‡ºé‡è¶Šå¤§ï¼Œè¶Šå€¾å‘äºè°ƒè¯•ï¼Œè‹¥éœ€è¦è¯·è‡ªè¡Œå¼€å¯ã€‚
log-level: info

# Clash çš„ RESTful API
external-controller: '127.0.0.1:9090'

# æ‚¨å¯ä»¥å°†é™æ€ç½‘é¡µèµ„æºï¼ˆå¦‚ clash-dashboardï¼‰æ”¾ç½®åœ¨ä¸€ä¸ªç›®å½•ä¸­ï¼Œclash å°†ä¼šæœåŠ¡äº `RESTful API/ui`
# å‚æ•°åº”å¡«å†™é…ç½®ç›®å½•çš„ç›¸å¯¹è·¯å¾„æˆ–ç»å¯¹è·¯å¾„ã€‚
# http://127.0.0.1:9090/ui/#/
# external-ui: folder
# yacdé¢æ¿ï¼š  https://github.com/haishanh/yacd
# Razordé¢æ¿ï¼šhttp://clash.razord.top/#/proxies
# external-ui: dashboard

# RESTful API çš„å£ä»¤ (å¯é€‰)
# secret: ""

# å®éªŒæ€§åŠŸèƒ½
# experimental:
  # ignore-resolve-fail: true # å¿½ç•¥ DNS è§£æå¤±è´¥ï¼Œé»˜è®¤å€¼ä¸º true
  # interface-name: en0 # outbound interface name

# æœ¬åœ° SOCKS5 / HTTP(S) æœåŠ¡è®¤è¯
# authentication:
#  - "user1:pass1"
#  - "user2:pass2"

# å®éªŒæ€§åŠŸèƒ½ hosts, æ”¯æŒé€šé…ç¬¦ (ä¾‹å¦‚ *.clash.dev ç”šè‡³ *.foo.*.example.com)
# é™æ€çš„åŸŸå æ¯” é€šé…åŸŸå å…·æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ (foo.example.com ä¼˜å…ˆäº *.example.com)
# æ³¨æ„: hosts åœ¨ fake-ip æ¨¡å¼ä¸‹ä¸ç”Ÿæ•ˆ
#hosts:
#   '*.clash.dev': 127.0.0.1
#   'alpha.clash.dev': '::1'

dns:
  enable: true
  ipv6: true
  listen: 0.0.0.0:53
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  # fakeip è¿‡æ»¤ï¼Œè¿‡æ»¤çš„åœ°å€ä¸ä¼šä¸‹å‘ fakeip æ˜ å°„ç”¨äºè¿æ¥
  fake-ip-filter:
     - "*.lan"
     - "*.localdomain"
     - "*.example"
     - "*.invalid"
     - "*.localhost"
     - "*.test"
     - "*.local"
     - "*.home.arpa"
     - time.*.com
     - time.*.gov
     - time.*.edu.cn
     - time.*.apple.com
     - time1.*.com
     - time2.*.com
     - time3.*.com
     - time4.*.com
     - time5.*.com
     - time6.*.com
     - time7.*.com
     - ntp.*.com
     - ntp1.*.com
     - ntp2.*.com
     - ntp3.*.com
     - ntp4.*.com
     - ntp5.*.com
     - ntp6.*.com
     - ntp7.*.com
     - "*.time.edu.cn"
     - "*.ntp.org.cn"
     - +.pool.ntp.org
     - time1.cloud.tencent.com
     - music.163.com
     - "*.music.163.com"
     - "*.126.net"
     - musicapi.taihe.com
     - music.taihe.com
     - songsearch.kugou.com
     - trackercdn.kugou.com
     - "*.kuwo.cn"
     - api-jooxtt.sanook.com
     - api.joox.com
     - joox.com
     - y.qq.com
     - "*.y.qq.com"
     - streamoc.music.tc.qq.com
     - mobileoc.music.tc.qq.com
     - isure.stream.qqmusic.qq.com
     - dl.stream.qqmusic.qq.com
     - aqqmusic.tc.qq.com
     - amobile.music.tc.qq.com
     - "*.xiami.com"
     - "*.music.migu.cn"
     - music.migu.cn
     - +.msftconnecttest.com
     - +.msftncsi.com
     - msftconnecttest.com
     - msftncsi.com
     - localhost.ptlogin2.qq.com
     - localhost.sec.qq.com
     - +.srv.nintendo.net
     - +.stun.playstation.net
     - xbox.*.microsoft.com
     - xnotify.xboxlive.com
     - +.ipv6.microsoft.com
     - +.battlenet.com.cn
     - +.wotgame.cn
     - +.wggames.cn
     - +.wowsgame.cn
     - +.wargaming.net
     - proxy.golang.org
     - stun.*.*
     - stun.*.*.*
     - +.stun.*.*
     - +.stun.*.*.*
     - +.stun.*.*.*.*
     - heartbeat.belkin.com
     - "*.linksys.com"
     - "*.linksyssmartwifi.com"
     - "*.router.asus.com"
     - mesu.apple.com
     - swscan.apple.com
     - swquery.apple.com
     - swdownload.apple.com
     - swcdn.apple.com
     - swdist.apple.com
     - lens.l.google.com
     - stun.l.google.com
     - "*.square-enix.com"
     - "*.finalfantasyxiv.com"
     - "*.ffxiv.com"
     - "*.ff14.sdo.com"
     - ff.dorado.sdo.com
     - "*.mcdn.bilivideo.cn"
     - +.media.dssott.com
     - +.pvp.net
     - shark007.net
     - Mijia Cloud
     - +.market.xiaomi.com
     - +.cmbchina.com
     - +.cmbimg.com
     - adguardteam.github.io
     - adrules.top
     - anti-ad.net
     - local.adguard.org
     - static.adtidy.org
     - +.sandai.net
     - +.n0808.com
     - +.3gppnetwork.org
     - +.uu.163.com
     - ps.res.netease.com
     - +.oray.com
     - +.orayimg.com
  nameserver:
     - 119.29.29.29 # è…¾è®¯DNS
     - 223.5.5.5 # é˜¿é‡ŒDNS
     - 180.76.76.76 # ç™¾åº¦DNS
     #- 117.50.11.11 # ONE DNSæ‹¦æˆªç‰ˆ æ¶æ„ç½‘ç«™æ‹¦æˆªã€å¹¿å‘Šè¿‡æ»¤
     #- 117.50.10.10 # ONE DNSçº¯å‡€ç‰ˆ ç›´æ¥è¿”å›å…¶çœŸå®çš„å“åº”ç»“æœ
     #- 114.114.114.114 # 114DNS
     #- https://dns.alidns.com/dns-query # é˜¿é‡Œ DoH DNS
     #- https://doh.360.cn/dns-query # 360 DoH DNS
  #fallback:
     #- 8.8.8.8 # è°·æ­ŒDNS
     #- 1.1.1.1 # Cloudflare DNS
     #- tls://dns.rubyfish.cn:853
     #- tls://1.0.0.1:853
     #- tls://dns.google:853
     #- https://dns.rubyfish.cn/dns-query
     #- https://cloudflare-dns.com/dns-query
     #- https://dns.google/dns-query
  #fallback-filter:
     #geoip: true # é»˜è®¤
     #ipcidr: # åœ¨è¿™ä¸ªç½‘æ®µå†…çš„ IP åœ°å€ä¼šè¢«è€ƒè™‘ä¸ºè¢«æ±¡æŸ“çš„ IP
       #- 240.0.0.0/4

# 1. clash DNS è¯·æ±‚é€»è¾‘ï¼š
#   (1) å½“è®¿é—®ä¸€ä¸ªåŸŸåæ—¶ï¼Œ nameserver ä¸ fallback åˆ—è¡¨å†…çš„æ‰€æœ‰æœåŠ¡å™¨å¹¶å‘è¯·æ±‚ï¼Œå¾—åˆ°åŸŸåå¯¹åº”çš„ IP åœ°å€ã€‚
#   (2) clash å°†é€‰å– nameserver åˆ—è¡¨å†…ï¼Œè§£ææœ€å¿«çš„ç»“æœã€‚
#   (3) è‹¥è§£æç»“æœä¸­ï¼ŒIP åœ°å€å±äº å›½å¤–ï¼Œé‚£ä¹ˆ clash å°†é€‰æ‹© fallback åˆ—è¡¨å†…ï¼Œè§£ææœ€å¿«çš„ç»“æœã€‚
#
#   å› æ­¤ï¼Œæˆ‘åœ¨ nameserver å’Œ fallback å†…éƒ½æ”¾ç½®äº†æ— æ±¡æŸ“ã€è§£æé€Ÿåº¦è¾ƒå¿«çš„å›½å†… DNS æœåŠ¡å™¨ï¼Œä»¥è¾¾åˆ°æœ€å¿«çš„è§£æé€Ÿåº¦ã€‚
#   ä½†æ˜¯ fallback åˆ—è¡¨å†…æœåŠ¡å™¨ä¼šç”¨åœ¨è§£æå¢ƒå¤–ç½‘ç«™ï¼Œä¸ºäº†ç»“æœç»å¯¹æ— æ±¡æŸ“ï¼Œæˆ‘ä»…ä¿ç•™äº†æ”¯æŒ DoT/DoH çš„ä¸¤ä¸ªæœåŠ¡å™¨ã€‚
#
# 2. clash DNS é…ç½®æ³¨æ„äº‹é¡¹ï¼š
#   (1) å¦‚æœæ‚¨ä¸ºäº†ç¡®ä¿ DNS è§£æç»“æœæ— æ±¡æŸ“ï¼Œè¯·ä»…ä¿ç•™åˆ—è¡¨å†…ä»¥ tls:// æˆ– https:// å¼€å¤´çš„ DNS æœåŠ¡å™¨ï¼Œä½†æ˜¯é€šå¸¸å¯¹äºå›½å†…åŸŸåæ²¡æœ‰å¿…è¦ã€‚
#   (2) å¦‚æœæ‚¨ä¸åœ¨ä¹å¯èƒ½è§£æåˆ°æ±¡æŸ“çš„ç»“æœï¼Œæ›´åŠ è¿½æ±‚é€Ÿåº¦ã€‚è¯·å°† nameserver åˆ—è¡¨çš„æœåŠ¡å™¨æ’å…¥è‡³ fallback åˆ—è¡¨å†…ï¼Œå¹¶ç§»é™¤é‡å¤é¡¹ã€‚
#
# 3. å…³äº DNS over HTTPS (DoH) å’Œ DNS over TLS (DoT) çš„é€‰æ‹©ï¼š
#   å¯¹äºä¸¤é¡¹æŠ€æœ¯åŒæ–¹å„æ‰§ä¸€è¯ï¼Œè€Œä¸”ä¼šæ— ä¼‘æ­¢çš„äº‰è®ºï¼Œå„æœ‰åˆ©å¼Šã€‚å„ä½è¯·æ ¹æ®å…·ä½“éœ€æ±‚è‡ªè¡Œé€‰æ‹©ï¼Œä½†æ˜¯é…ç½®æ–‡ä»¶å†…é»˜è®¤å¯ç”¨ DoTï¼Œå› ä¸ºç›®å‰å›½å†…æ²¡æœ‰å°é”æˆ–ç®¡åˆ¶ã€‚
#   DoH: ä»¥ https:// å¼€å¤´çš„ DNS æœåŠ¡å™¨ã€‚æ‹¥æœ‰æ›´å¥½çš„ä¼ªè£…æ€§ï¼Œä¸”å‡ ä¹ä¸å¯èƒ½è¢«è¿è¥å•†æˆ–ç½‘ç»œç®¡ç†å°é”ï¼Œä½†æŸ¥è¯¢æ•ˆç‡å’Œå®‰å…¨æ€§å¯èƒ½ç•¥ä½ã€‚
#   DoT: ä»¥ tls:// å¼€å¤´çš„ DNS æœåŠ¡å™¨ã€‚æ‹¥æœ‰æ›´é«˜çš„å®‰å…¨æ€§å’ŒæŸ¥è¯¢æ•ˆç‡ï¼Œä½†ç«¯å£æœ‰å¯èƒ½è¢«ç®¡åˆ¶æˆ–å°é”ã€‚
#   è‹¥è¦äº†è§£æ›´å¤šå…³äº DoH/DoT ç›¸å…³æŠ€æœ¯ï¼Œè¯·è‡ªè¡ŒæŸ¥é˜…è§„èŒƒæ–‡æ¡£ã€‚

# ä»£ç†ç»„
# ä¸‹é¢è¿™3ä¸ªä¸è¦å¼•åˆ°è®¢é˜…é‡Œå» è¦ä¸ä¼šå‡ºé”™
# Will be ignored after profile selection
#proxies:
#  - name: Shadowsocks
#    type: socks5
#    server: 127.0.0.1
#    port: 1080
#proxy-groups:
#  - name: Proxy
#    type: select
#    proxies:
#      - Shadowsocks
rules:
   - 'DOMAIN-SUFFIX,misakaf.org,ğŸš€ èŠ‚ç‚¹é€‰æ‹©'
#  - 'MATCH,DIRECT'

# Clash for Windows
# Proxies module latency test settings
# cfw-latency-timeout: 3000
# cfw-latency-url: http://www.gstatic.com/generate_204

# æ··åˆé…ç½®ï¼ˆmixinï¼‰
# æ”¯æŒå‘æ‰€æœ‰é…ç½®æ–‡ä»¶ä¸­æ³¨å…¥å…¬å…±å±æ€§è®¾ç½®
#cfw-profile-mixin:
  #dns:
    #enable: true
    #listen: :53
    #enhanced-mode: fake-ip
    #nameserver:
     #- 223.5.5.5 # é˜¿é‡ŒDNS
     #- 180.76.76.76 # ç™¾åº¦DNS
     #- 119.29.29.29 # è…¾è®¯DNS
     #- 117.50.11.11 # ONE DNSæ‹¦æˆªç‰ˆ æ¶æ„ç½‘ç«™æ‹¦æˆªã€å¹¿å‘Šè¿‡æ»¤
     #- 117.50.10.10 # ONE DNSçº¯å‡€ç‰ˆ ç›´æ¥è¿”å›å…¶çœŸå®çš„å“åº”ç»“æœ
     #- 114.114.114.114 # 114DNS
  #experimental:
    #interface-name: WLAN

#è‡ªå®šä¹‰é…ç½®ç›®å½•
#cfw-profiles-path: 'C:\Users\Administrator\.config\clash\profiles'

# æ‰“æ–­è¿æ¥
# Identify strategy of breaking connections after switching to a new proxy/profile/mode
# Options for proxy: none, chain(proxy group in connection chains), all
# Options for profile: true, false
# Options for mode: true, false
cfw-conn-break-strategy:
  proxy: chain # none/chain/all
  profile: true # true/false
  mode: true # true/false

# è‡ªå®šä¹‰çŠ¶æ€æ å›¾æ ‡
#cfw-tray-icon:
#default: .\resources\static\imgs\logo_64.png        # é»˜è®¤å›¾æ ‡
#system-proxy-on: .\resources\static\imgs\custom.ico   # å¼€å¯ç³»ç»Ÿä»£ç†åå›¾æ ‡

# è‡ªå®šä¹‰å­—ä½“
#cfw-font-family: "Noto Sans TC"   # ç³»ç»Ÿä¸­å­˜åœ¨çš„å­—ä½“

# è‡ªå®šä¹‰è¯·æ±‚å¤´
#cfw-http-headers:
  #token: "123456"
  #cfw-version: "0.9.11"

# è‡ªå®šä¹‰èŠ‚ç‚¹æ’åº
# å¯é€‰å‚æ•°ï¼š
#  defaultï¼šæŒ‰é…ç½®æ–‡ä»¶å®šä¹‰èŠ‚ç‚¹é¡ºåº
#  latencyï¼šæŒ‰èŠ‚ç‚¹å»¶è¿Ÿå‡åºæ’åˆ—
#  alphabetï¼šæŒ‰èŠ‚ç‚¹åç§°å­—æ¯è¡¨æ’åˆ—
# Sort proxies in Proxies module by default/latency/alphabet
# cfw-proxies-order: default

# å­è¿›ç¨‹ å¯åŠ¨å…¶ä»–åº”ç”¨
# Run child process after CFW started
# Refer: https://docs.cfw.lbyczf.com/contents/childprocess.html
#cfw-child-process:
  # å¯åŠ¨è®¢é˜…è½¬æ¢ç¨‹åºï¼Œç«¯å£å·7893
  #- command: "subconverter.exe" # run.cmd ç¨‹åºåç§° subconverter.exe -cfw >>logs/run.log 2>&1
    #args:
      #- "-cfw" # è¿è¡Œå‚æ•°1
      #- "-f" # è¿è¡Œå‚æ•°2
      #- "pref-acl4ssr.yml" # è¿è¡Œå‚æ•°3
    #options:
      #cwd: subconverter # å­è¿›ç¨‹å·¥ä½œç›®å½•
      #detached: true # å­è¿›ç¨‹ç‹¬ç«‹äºå…¶çˆ¶è¿›ç¨‹è¿è¡Œ
      #shell: true # åˆ™åœ¨ shell ä¸­è¿è¡Œ command
      #windowsHide: true # éšè—å­è¿›ç¨‹çš„æ§åˆ¶å°çª—å£
  # å¯åŠ¨ç½‘æ˜“äº‘ï¼Œç«¯å£å·3333
  #- command: "unblockneteasemusic.exe" # å¯åŠ¨ç½‘æ˜“äº‘
    #args:
      #- "-p" # è¿è¡Œå‚æ•°1
      #- "3333" # è¿è¡Œå‚æ•°2
    #options:
      #cwd: unblockNeteaseMusic # å­è¿›ç¨‹å·¥ä½œç›®å½•
      #detached: true # å­è¿›ç¨‹ç‹¬ç«‹äºå…¶çˆ¶è¿›ç¨‹è¿è¡Œ
      #shell: true # åˆ™åœ¨ shell ä¸­è¿è¡Œ command
      #windowsHide: true # éšè—å­è¿›ç¨‹çš„æ§åˆ¶å°çª—å£
# ç³»ç»Ÿä»£ç†è·³è¿‡åˆ—è¡¨ èµ·ä½œç”¨çš„
#cfw-bypass:
  # ç›´è¿åˆ—è¡¨
  # MyList
  # - "*.13th.tech"
  # - "*.423down.com"

